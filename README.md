#### Blog

<http://www.xyu.ink/1406.html>

####无降采样Val(1:15)AUC指标

| \#/迭代次数 | 1k       | 2k       | 3k       |
| ----------- | -------- | -------- | -------- |
| 1           | 0.735484 | 0.530476 | 0.474907 |
| 2           | 0.738101 | 0.542276 | 0.537308 |
| 3           | 0.736460 | 0.489866 | 0.523554 |

　　分析：用对数(log)损失训练，正负样本**不均衡**的情况下。训练迭代次数越多，输出就会越接近0，从而使得输出的差距越来越小。（因为即使全输出0，也能满足96%的样本）(输出的期望为0.06时，logloss最小)

　　而最终评价使用的**AUC**定义为**随机正样本排在负样本之前的概率**，由于无论正负样本输出概率都减小了，所以AUC会向0.5接近。



#### Val(1:3)
| #    | 1k       | 2k   | 3k   |
| ---- | -------- | ---- | ---- |
| 1    | 0.733139 |      |      |
| 2    |          |      |      |
| 3    |          |      |      |


####Val(1:1.5)
| #    | 1k   | 2k   | 3k   |
| ---- | ---- | ---- | ---- |
| 1    |      |      |      |
| 2    |      |      |      |
| 3    |      |      |      |


####Val(1:1)
|  #   |  1k  |  2k  |  3k  | 4.8k |
| :--: | :--: | :--: | :--: | :--: |
|  1   |  -   |      |  -   |  -   |
|  2   |      |      |      |      |
|  3   |      |      |      |      |

#### Submissions

| #    | 模型 |  特征       |lr| 训练量 | 正负样本比 |logloss| val_auc |auc(提交)      |
| :--: | :----------: | :------: | :---------: | :----: | :--------: | :------: |:-:|:-:|
| 1    | **nffm** |    sid |2e-5| 4096×1k | 1:15       | 未记录 |0.736460|0.561783|
| 2    | nffm | sid  |2e-5| 4096×5k | 1:1 | 0.565518 |0.771065|0.557250|
| 3    | nffm | sid  |2e-5| 4096×9k | 1:3 | 0.458481 |0.776028|0.608831|
| 4    | nffm | sid  |2e-5| 4096×10k | **1:15** | 0.196078 | 0.774114 |0.614845|
| 5    | nffm | sid |2e-5| 4096×30k | 1:15 | 0.195349 | 0.78122 |0.628099|
| 6    | nffm | sid | 2e-5 | 512×300k | 1:15 | 0.196052 |0.787727| 0.625490 |
| 7    | nffm**(k=16)** | sid | **2e-4** | **4096×38k** | 1:15 | 0.185279 |0.831037| **0.646756** |
| 8    |  | **sid+?m** |  |  |  |  || |
| 9    |  |   |||             |        |            |          |
| 10 | xdeepfm | sid | 2e-5 |4096×38k| 1:15 |        |            | 0.622260 |

| #    | 模型 |  特征       |特征处理| 训练量 | hidden |logloss| val_auc |auc      |
| :--: | :----------: | :------: | :---------: | :----: | :--------: | :------: |:-:|:-:|
| 1  | nffm | - | - | **4096×38k** | 128 | 0.185279 |0.831037| 0.646756 |
| 2  | nffm | - | - | 4096×38k | 256 | 0.185056 |0.832358| 0.646034 |
| 3  | nffm | c | same | 4096×38k |  |  || |
| 4  | nffm | c | concat | 4096×38k |  |  || |
| 5  | nffm | c | multiply | 4096×38k |  |  || |
| 6  | nffm | c | batchnorm | 4096×38k |  |  || |
| 7   | nffm | - | 0.01 | 4096×1.6k |  | 0.191926 |0.773228| 0.635992 |
| 8  | - | - | ensemble | 1和7 | 4:6 |  || **0.647619** |
| 9  | ~~nffm*~~ | - | ~~0.001~~ | ~~4096×1.6k×3~~ |  | - |0.708772| |
| 10  | nffm | - | 0.01 | 4096×1.6k(shuf) |  |  || |
| 11    | nffm |  | 0.00002 | -robot |  | 0.187185 |0.828677| 0.647068 |
| 12    | nffm | 0.1×no | 0.01 |  |  | 0.201868 |0.800631| 0.653102 |
| 13    | nffm | 0.2×no | 0.01 | 600w+3000w |  | 0.196165 |0.811906| **0.662776** |
| 14    | nffm | 0.3×no | 0.01 |  |  |  || 0.658694 |
| 15    | nffm | 0.4×no | 0.01 |  |  |  || |
| 16    | nffm | 0.5×no | 0.01 |  |  |  || |
| 17    | nffm | 0.6×no | 0.01 |  |  |  || |
| 18    | nffm | 0.7×no | 0.01 |  |  |  || |
| 19    | nffm | 0.8×no | 0.01 |  |  |  || |
| 20    | nffm | 0.9×no | 0.01 |  |  |  || |